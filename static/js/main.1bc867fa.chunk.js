(this["webpackJsonpminhas-financas-pwa"]=this["webpackJsonpminhas-financas-pwa"]||[]).push([[0],{295:function(t,a,e){},303:function(t,a){},305:function(t,a){},340:function(t,a){},342:function(t,a){},343:function(t,a){},348:function(t,a){},350:function(t,a){},370:function(t,a){},386:function(t,a){},389:function(t,a){},463:function(t,a,e){"use strict";e.r(a);e(295),e(296),e(297);var o=e(226),s=e(26),r=e(37),i=e(220);class n{static adicionarItem(t,a){localStorage.setItem(t,JSON.stringify(a))}static obterItem(t){const a=localStorage.getItem(t);return JSON.parse(a)}static removerItem(t){localStorage.removeItem(t)}}var c=e(221),l=e.n(c);const u="_usuario_logado",h="accessToken";class d{static isUsuarioAutenticado(){const t=n.obterItem(h);if(!t)return!1;const a=l.a.decode(t).exp;return!(Date.now()>=1e3*a)}static removerUsuarioAutenticado(){n.removerItem(u),n.removerItem(h)}static logar(t,a){n.adicionarItem(u,t),n.adicionarItem(h,a)}static obterUsuarioAutenticado(){return n.obterItem(u)}static refreshSession(){const t=n.obterItem(h),a=d.obterUsuarioAutenticado();return d.logar(a,t),a}}var b=e(2),m=e.n(b),p=e(6);const j=m.a.createContext(),g=j.Consumer,x=j.Provider;class O extends m.a.Component{constructor(){super(...arguments),this.state={usuarioAutenticado:null,isAutenticado:!1,isLoading:!0},this.iniciarSessao=t=>{d.logar(t,t.accessToken),this.setState({isAutenticado:!0,usuarioAutenticado:t})},this.encerrarSessao=()=>{d.removerUsuarioAutenticado(),this.setState({isAutenticado:!1,usuarioAutenticado:null})}}async componentDidMount(){if(d.isUsuarioAutenticado()){const t=await d.refreshSession();this.setState({isAutenticado:!0,usuarioAutenticado:t,isLoading:!1})}else this.setState((t=>Object(r.a)(Object(r.a)({},t),{},{isLoading:!1})))}render(){if(this.state.isLoading)return null;const t={usuarioAutenticado:this.state.usuarioAutenticado,isAutenticado:this.state.isAutenticado,iniciarSessao:this.iniciarSessao,encerrarSessao:this.encerrarSessao};return Object(p.jsx)(x,{value:t,children:this.props.children})}}var v=O,f=e(227),S=e(17),A=e(51),D=e(196),L=e(83),w=e(197),y=e(198),C=e(199);var z=t=>{const[a,e]=Object(b.useState)(""),[o,s]=Object(b.useState)(""),[r,i]=Object(b.useState)(""),[n,c]=Object(b.useState)(""),[l,u]=Object(b.useState)(""),[h,d]=Object(b.useState)(""),[m,j]=Object(b.useState)(""),[g,x]=Object(b.useState)("");Object(b.useEffect)((()=>{e(t.lancamentoAtualizar.id),s(t.lancamentoAtualizar.descricao),i(t.lancamentoAtualizar.valor),c(t.lancamentoAtualizar.mes),u(t.lancamentoAtualizar.ano),d(t.lancamentoAtualizar.tipo),j(t.lancamentoAtualizar.status),x(t.lancamentoAtualizar.atualizando)}),[t.lancamentoAtualizar.id,t.lancamentoAtualizar.descricao,t.lancamentoAtualizar.valor,t.lancamentoAtualizar.mes,t.lancamentoAtualizar.ano,t.lancamentoAtualizar.tipo,t.lancamentoAtualizar.status,t.lancamentoAtualizar.atualizando]);const O=t.meses.map(((t,a)=>Object(p.jsx)("option",{value:t.value,children:t.label},a))),v=t.tipos.map(((t,a)=>Object(p.jsx)("option",{value:t.value,children:t.label},a)));return Object(p.jsx)(D.a,{children:Object(p.jsxs)(L.a,{children:[Object(p.jsx)(w.a,{children:g?"Atualiza\xe7\xe3o de Lan\xe7amento":"Cadastro de Lan\xe7amentos"}),Object(p.jsxs)(y.a,{form:!0,children:[Object(p.jsx)(C.a,{label:"Descri\xe7\xe3o",type:"text",placeholder:"Descri\xe7\xe3o",value:o,onInput:t=>{s(t.target.value)}}),Object(p.jsx)(C.a,{label:"Valor",type:"text",placeholder:"Valor",value:r,onInput:t=>{i(t.target.value.replace(",","."))}}),Object(p.jsx)(C.a,{label:"Mes",type:"select",placeholder:"Escolha o m\xeas...",value:n,onChange:t=>{c(t.target.value)},children:O}),Object(p.jsx)(C.a,{label:"Ano",type:"text",placeholder:"Ano",value:l,onInput:t=>{u(t.target.value)}}),Object(p.jsx)(C.a,{label:"Tipo",type:"select",placeholder:"Escolha um tipo...",value:h,onChange:t=>{d(t.target.value)},children:v}),Object(p.jsx)(C.a,{label:"Status",type:"text",placeholder:"Status",value:m,disabled:!0}),Object(p.jsx)("button",{style:{display:g?"none":"block"},onClick:a=>{a.preventDefault(),t.cadastrar({descricao:o,valor:r,mes:n,ano:l,tipo:h})},className:"col button button-raised",children:"Cadastrar"}),Object(p.jsx)("button",{style:{display:g?"block":"none"},onClick:e=>{e.preventDefault(),t.atualizar({descricao:o,valor:r,mes:n,ano:l,tipo:h,status:m,id:a})},className:"col button button-raised",children:"Atualizar"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:t.cancelar,className:"col button button-raised button-fill",children:"Cancelar"})]})]})})},k=e(222);const I=e.n(k).a.create({baseURL:"https://sistema.siso.com.br"});var T=class{constructor(t){this.apiurl=t}post(t,a){const e="".concat(this.apiurl).concat(t);return I.post(e,a)}put(t,a){const e="".concat(this.apiurl).concat(t);return I.put(e,a)}delete(t){const a="".concat(this.apiurl).concat(t);return I.delete(a)}get(t){const a="".concat(this.apiurl).concat(t);return I.get(a)}getWithAuthorization(t,a){const e="".concat(this.apiurl).concat(t);return I.get(e,{headers:{Authorization:"Bearer ".concat(a.accessToken),usuarioId:a.id}})}postWithAuthorization(t,a,e){const o="".concat(this.apiurl).concat(t);return I.post(o,a,{headers:{Authorization:"Bearer ".concat(e.accessToken),usuarioId:e.id}})}postWithAuthorizationWithoutBody(t,a){const e="".concat(this.apiurl).concat(t);return I.post(e,{},{headers:{Authorization:"Bearer ".concat(a.accessToken),usuarioId:a.id}})}putWithAuthorization(t,a,e){const o="".concat(this.apiurl).concat(t);return I.put(o,a,{headers:{Authorization:"Bearer ".concat(e.accessToken),usuarioId:e.id}})}deleteWithAuthorization(t,a){const e="".concat(this.apiurl).concat(t);return I.delete(e,{headers:{Authorization:"Bearer ".concat(a.accessToken),usuarioId:a.id}})}};var E=function(t){this.mensagens=t};class N extends T{constructor(){super("/api/lancamentos")}obterListaMeses(){return[{label:"Selecione...",value:""},{label:"Janeiro",value:1},{label:"Fevereiro",value:2},{label:"Mar\xe7o",value:3},{label:"Abril",value:4},{label:"Maio",value:5},{label:"Junho",value:6},{label:"Julho",value:7},{label:"Agosto",value:8},{label:"Setembro",value:9},{label:"Outubro",value:10},{label:"Novembro",value:11},{label:"Dezembro",value:12}]}obterListaTipos(){return[{label:"Selecione...",value:""},{label:"Despesa",value:"DESPESA"},{label:"Receita",value:"RECEITA"}]}obterPorId(t,a){return this.getWithAuthorization("/".concat(t),a)}salvar(t,a){return this.postWithAuthorization("",t,a)}atualizar(t,a){return this.putWithAuthorization("/".concat(t.id),t,a)}alterarStatus(t,a,e){return this.putWithAuthorization("/".concat(t,"/status"),{status:a},e)}consultar(t,a){let e="?ano=".concat(t.ano);return t.mes&&(e="".concat(e,"&mes=").concat(t.mes)),t.tipo&&(e="".concat(e,"&tipo=").concat(t.tipo)),t.status&&(e="".concat(e,"&status=").concat(t.status)),t.descricao&&(e="".concat(e,"&descricao=").concat(t.descricao)),this.getWithAuthorization(e,a)}deletar(t,a){return this.deleteWithAuthorization("/".concat(t),a)}duplicarLancamentos(t,a){return this.postWithAuthorizationWithoutBody("/".concat(t),a)}validar(t){const a=[];if(t.ano||a.push("Informe o Ano."),t.mes||a.push("Informe o M\xeas."),t.descricao||a.push("Informe a Descri\xe7\xe3o."),t.valor||a.push("Informe o Valor."),t.tipo||a.push("Informe o Tipo."),a&&a.length>0)throw new E(a)}}var U=e(3),F=e(208),B=e(209);class M extends m.a.Component{constructor(){super(),this.state={showLoadingDialog:!1,lancamentoAtualizar:{id:null,descricao:"",valor:"",mes:"",ano:"",tipo:"",status:"",atualizando:!1}},this.submit=t=>{const a=this.context.usuarioAutenticado,{descricao:e,valor:o,mes:s,ano:r,tipo:i}=t,n={descricao:e,valor:o,mes:s,ano:r,tipo:i};try{this.lancamentoService.validar(n)}catch(l){return l.mensagens.forEach((t=>U.a.dialog.alert(t,(()=>{})))),!1}this.setState({showLoadingDialog:!0});const c=U.a.dialog.preloader("Carregando...","blue");this.lancamentoService.salvar(n,a).then((t=>{c.close(),U.a.dialog.alert("Lan\xe7amento cadastrado com sucesso!",(()=>{})),this.setState({showLoadingDialog:!1}),this.props.history.push("/consulta-lancamentos")})).catch((t=>{c.close(),U.a.dialog.alert(t.response.data,(()=>{})),this.setState({showLoadingDialog:!1})}))},this.atualizar=t=>{const a=this.context.usuarioAutenticado,{descricao:e,valor:o,mes:s,ano:r,tipo:i,status:n,id:c}=t,l={descricao:e,valor:o,mes:s,ano:r,tipo:i,status:n,id:c};this.setState({showLoadingDialog:!0});const u=U.a.dialog.preloader("Carregando...","blue");this.lancamentoService.atualizar(l,a).then((t=>{u.close(),U.a.dialog.alert("Lan\xe7amento atualizado com sucesso!",(()=>{})),this.setState({showLoadingDialog:!1}),this.props.history.push("/consulta-lancamentos")})).catch((t=>{u.close(),U.a.dialog.alert(t.response.data,(()=>{})),this.setState({showLoadingDialog:!1})}))},this.cancelar=()=>{this.props.history.push("/consulta-lancamentos")},this.aoSair=()=>{this.context.encerrarSessao(),this.props.history.push("/login")},this.lancamentoService=new N}componentDidMount(){const t=this.props.match.params,a=this.context.usuarioAutenticado;if(t.id&&a){this.setState({showLoadingDialog:!0});const e=U.a.dialog.preloader("Carregando...","blue");this.lancamentoService.obterPorId(t.id,a).then((t=>{e.close(),this.setState({lancamentoAtualizar:{id:t.data.id,descricao:t.data.descricao,valor:t.data.valor,mes:t.data.mes,ano:t.data.ano,tipo:t.data.tipo,status:t.data.status,atualizando:!0},showLoadingDialog:!1})})).catch((t=>{e.close(),U.a.dialog.alert(t.response.data,(()=>{})),this.setState({showLoadingDialog:!1})}))}}render(){const t=this.lancamentoService.obterListaTipos(),a=this.lancamentoService.obterListaMeses();return Object(p.jsxs)(F.a,{children:[Object(p.jsx)(B.a,{infinite:!0,color:"blue",style:{display:this.state.showLoadingDialog?"block":"none"}}),Object(p.jsx)(z,{meses:a,tipos:t,cancelar:this.cancelar,cadastrar:this.submit,atualizar:this.atualizar,lancamentoAtualizar:this.state.lancamentoAtualizar})]})}}M.contextType=j;var _=Object(S.g)(M),R=e(211),W=e(87),J=e(212),P=e(213),V=e(214);function H(t){let{cadastrar:a,voltar:e}=t;const[o,s]=Object(b.useState)(""),[r,i]=Object(b.useState)(""),[n,c]=Object(b.useState)(""),[l,u]=Object(b.useState)("");return Object(p.jsxs)(F.a,{noToolbar:!0,noNavbar:!0,noSwipeback:!0,loginScreen:!0,children:[Object(p.jsx)(w.a,{children:"Cadastro de Usu\xe1rios"}),Object(p.jsxs)(y.a,{form:!0,children:[Object(p.jsx)(C.a,{label:"Nome",type:"text",placeholder:"Seu nome",value:o,onInput:t=>{s(t.target.value)}}),Object(p.jsx)(C.a,{label:"E-mail",type:"text",placeholder:"Seu e-mail",value:r,onInput:t=>{i(t.target.value)}}),Object(p.jsx)(C.a,{label:"Senha",type:"password",placeholder:"Sua senha",value:n,onInput:t=>{c(t.target.value)}}),Object(p.jsx)(C.a,{label:"Confirma\xe7\xe3o de Senha",type:"password",placeholder:"Confirme a senha digitada...",value:l,onInput:t=>{u(t.target.value)}})]}),Object(p.jsxs)(R.a,{position:"right-bottom",slot:"fixed",color:"pink",children:[Object(p.jsx)(W.a,{ios:"f7:plus",aurora:"f7:plus",md:"f7:plus"}),Object(p.jsx)(W.a,{ios:"f7:xmark",aurora:"f7:xmark",md:"f7:xmark"}),Object(p.jsxs)(J.a,{position:"left",children:[Object(p.jsx)(P.a,{onClick:t=>{t.preventDefault(),a({nome:o,email:r,senha:n,senhaRepeticao:l})},children:Object(p.jsx)(W.a,{ios:"f7:checkmark",aurora:"f7:checkmark",md:"f7:checkmark"})}),Object(p.jsx)(P.a,{onClick:e,children:Object(p.jsx)(W.a,{ios:"f7:arrow_uturn_left",aurora:"f7:arrow_uturn_left",md:"f7:arrow_uturn_left"})})]})]}),Object(p.jsx)(y.a,{children:Object(p.jsx)(V.a,{children:"Todos os direitos reservados. 2024"})})]})}var Y=class extends T{constructor(){super("/api/usuarios")}autenticar(t){return this.post("/autenticar",t)}obterSaldoPorUsuario(t){return this.getWithAuthorization("/saldo",t)}salvar(t){return this.post("/",t)}validar(t){const a=[];t.nome||a.push("O campo nome \xe9 obrigat\xf3rio.");if(t.email?t.email.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)||a.push("Informe um email v\xe1lido."):a.push("O campo email \xe9 obrigat\xf3rio."),t.senha.length<8&&a.push("Sua senha deve conter no m\xednimo 8 caracteres."),t.senha&&t.senhaRepeticao?t.senha!==t.senhaRepeticao&&a.push("As senhas digitadas n\xe3o s\xe3o iguais."):a.push("Digite a senha e a confirma\xe7\xe3o."),a&&a.length>0)throw new E(a)}};class Z extends m.a.Component{constructor(){super(),this.state={showLoadingDialog:!1},this.goHome=()=>{this.props.history.push("/home")},this.aoCadastrarForm=t=>{const{nome:a,email:e,senha:o,senhaRepeticao:s}=t,r={nome:a,email:e,senha:o,senhaRepeticao:s};try{this.service.validar(r)}catch(n){return n.mensagens.forEach((t=>U.a.dialog.alert(t,(()=>{})))),!1}this.setState({showLoadingDialog:!0});const i=U.a.dialog.preloader("Carregando...","blue");this.service.salvar(r).then((t=>{i.close(),this.setState({showLoadingDialog:!1}),U.a.dialog.alert("Usu\xe1rio cadastrado com sucesso!",(()=>{})),this.props.history.push("/home")})).catch((t=>{i.close(),this.setState({showLoadingDialog:!1}),U.a.dialog.alert(t.response.data.message,(()=>{}))}))},this.service=new Y}render(){return Object(p.jsxs)(m.a.Fragment,{children:[Object(p.jsx)(B.a,{infinite:!0,color:"blue",style:{display:this.state.showLoadingDialog?"block":"none"}}),Object(p.jsx)(H,{cadastrar:this.aoCadastrarForm,voltar:this.goHome})]})}}var G=Object(S.g)(Z),$=e(219),q=e(144),K=e.n(q);function Q(t){let{meses:a,tipos:e,buscar:o,cadastrar:s,duplicarLancamentos:r}=t;const i=K()().format("YYYY"),n=K()().format("M"),[c,l]=Object(b.useState)(i),[u,h]=Object(b.useState)(n),[d,m]=Object(b.useState)(""),[j,g]=Object(b.useState)(""),x=a.map(((t,a)=>Object(p.jsx)("option",{value:t.value,children:t.label},a))),O=e.map(((t,a)=>Object(p.jsx)("option",{value:t.value,children:t.label},a)));return Object(p.jsx)(D.a,{children:Object(p.jsxs)(L.a,{children:[Object(p.jsx)(w.a,{children:"Consulta - Lan\xe7amentos"}),Object(p.jsxs)(y.a,{form:!0,children:[Object(p.jsx)(C.a,{label:"Ano",type:"text",placeholder:"Ano",value:c,onInput:t=>{l(t.target.value)}}),Object(p.jsx)(C.a,{label:"Mes",type:"select",placeholder:"Escolha o m\xeas...",value:u,onChange:t=>{h(t.target.value)},children:x}),Object(p.jsx)(C.a,{label:"Descri\xe7\xe3o",type:"text",placeholder:"Descri\xe7\xe3o",value:j,onInput:t=>{g(t.target.value)}}),Object(p.jsx)(C.a,{label:"Tipo",type:"select",placeholder:"Escolha um tipo...",value:d,onChange:t=>{m(t.target.value)},children:O}),Object(p.jsx)("button",{onClick:t=>{t.preventDefault(),r(n)},className:"col button button-raised",children:"Duplicar Lan\xe7amentos"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:t=>{t.preventDefault(),o({ano:c,mes:u,tipo:d,descricao:j})},className:"col button button-raised",children:"Buscar"}),Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:s,className:"col button button-raised button-fill",children:"Cadastrar"})]})]})})}var X=e(215),tt=e(216),at=e(217),et=e(218),ot=e(66),st=e.n(ot);var rt=t=>{const a=t=>{switch(t){case 1:return"JAN";case 2:return"FEV";case 3:return"MAR";case 4:return"ABR";case 5:return"MAI";case 6:return"JUN";case 7:return"JUL";case 8:return"AGO";case 9:return"SET";case 10:return"OUT";case 11:return"NOV";case 12:return"DEZ";default:return"NULL"}};let e=0,o=0,s=t.lancamentos.map((s=>("RECEITA"===s.tipo?e+=s.valor:o+=s.valor,Object(p.jsx)(X.a,{title:s.descricao,after:a(s.mes),subtitle:st.a.format(s.valor,{locale:"pt-BR"}),text:"EFETIVADO"===s.status?"PAGO":s.status,children:Object(p.jsxs)(tt.a,{children:[Object(p.jsx)(at.a,{children:Object(p.jsx)(et.a,{fill:!0,color:"green",disabled:"PENDENTE"!==s.status,onClick:a=>t.alterarStatus(s,"EFETIVADO"),children:Object(p.jsx)(W.a,{ios:"f7:money_dollar_circle",aurora:"f7:money_dollar_circle",md:"f7:money_dollar_circle"})})}),Object(p.jsx)(at.a,{children:Object(p.jsx)(et.a,{fill:!0,color:"yellow",disabled:"PENDENTE"!==s.status,onClick:a=>t.alterarStatus(s,"CANCELADO"),children:Object(p.jsx)(W.a,{ios:"f7:nosign",aurora:"f7:nosign",md:"f7:nosign"})})}),Object(p.jsx)(at.a,{children:Object(p.jsx)(et.a,{fill:!0,color:"blue",onClick:a=>t.editarAction(s.id),children:Object(p.jsx)(W.a,{ios:"f7:pencil",aurora:"f7:pencil",md:"f7:pencil"})})}),Object(p.jsx)(at.a,{children:Object(p.jsx)(et.a,{fill:!0,color:"red",onClick:a=>t.deletarAction(s),children:Object(p.jsx)(W.a,{ios:"f7:trash",aurora:"f7:trash",md:"f7:trash"})})})]})},s.id))));return s.push(Object(p.jsx)(X.a,{title:"Saldo",after:"M\xeas Atual",subtitle:st.a.format(e-o,{locale:"pt-BR"}),text:"Total de receitas debitando total de despesas do m\xeas."},"d685c410-0afb-4d86-a3b5-5802ea5ca2c2")),Object(p.jsx)(D.a,{children:Object(p.jsx)(L.a,{children:Object(p.jsx)(y.a,{mediaList:!0,children:s})})})};class it extends m.a.Component{constructor(){super(),this.state={showLoadingDialog:!1,showTableDialog:!1,lancamentoDeletar:{},lancamentos:[]},this.aoBuscarForm=t=>{if(!t.ano)return U.a.dialog.alert("O preenchimento do campo Ano \xe9 obrigat\xf3rio.",(()=>{})),!1;if(!t.mes)return U.a.dialog.alert("O preenchimento do campo M\xeas \xe9 obrigat\xf3rio.",(()=>{})),!1;const a=this.context.usuarioAutenticado,e={ano:t.ano,mes:t.mes,tipo:t.tipo,descricao:t.descricao};this.setState({showLoadingDialog:!0});const o=U.a.dialog.preloader("Carregando...","blue");this.service.consultar(e,a).then((t=>{const a=t.data;a.length<1&&(o.close(),this.setState({showLoadingDialog:!1,showTableDialog:!1}),U.a.dialog.alert("Nenhum resultado encontrado!",(()=>{}))),o.close(),this.setState({showLoadingDialog:!1,showTableDialog:!0,lancamentos:a})})).catch((t=>{o.close(),this.setState({showLoadingDialog:!1,showTableDialog:!1}),U.a.dialog.alert("Erro ao consultar lan\xe7amentos. Tente novamente ou mais tarde.",(()=>{}))}))},this.aoCadastrarForm=()=>{this.props.history.push("/cadastro-lancamentos")},this.editar=t=>{this.props.history.push("/cadastro-lancamentos/".concat(t))},this.aoDuplicarLancamentos=t=>{const a=this.context.usuarioAutenticado;console.log(a.accessToken),this.setState({showLoadingDialog:!0});const e=U.a.dialog.preloader("Carregando...","blue");this.service.duplicarLancamentos(t,a).then((a=>{e.close(),this.setState({showLoadingDialog:!1,showTableDialog:!1}),U.a.dialog.alert("Lan\xe7amentos do m\xeas: "+t+"copiados com sucesso para o pr\xf3ximo m\xeas.",(()=>{}))})).catch((t=>{e.close(),this.setState({showLoadingDialog:!1,showTableDialog:!1}),U.a.dialog.alert("Erro ao duplicar lan\xe7amentos. Tente novamente ou mais tarde.",(()=>{}))}))},this.aoAlterarStatus=(t,a)=>{const e=this.context.usuarioAutenticado;this.setState({showLoadingDialog:!0});const o=U.a.dialog.preloader("Carregando...","blue");this.service.alterarStatus(t.id,a,e).then((e=>{const s=this.state.lancamentos,r=s.indexOf(t);-1!==r&&(t.status=a,s[r]=t,this.setState({lancamentos:s})),this.setState({showLoadingDialog:!1}),o.close(),U.a.dialog.alert("Status atualizado com sucesso!",(()=>{}))})).catch((t=>{o.close(),this.setState({showLoadingDialog:!1}),U.a.dialog.alert("Erro ao tentar alterar status do lan\xe7amento.",(()=>{}))}))},this.abrirConfirmacao=t=>{const a="Deseja realmente excluir o lan\xe7amento ".concat(t.descricao,"?");U.a.dialog.create({title:"Exclus\xe3o de Lan\xe7amento",text:a,buttons:[{text:"Sim",onClick:()=>this.deletar(t)},{text:"N\xe3o"}],verticalButtons:!1}).open()},this.deletar=t=>{const a=this.context.usuarioAutenticado;this.setState({showLoadingDialog:!0});const e=U.a.dialog.preloader("Carregando...","blue");this.service.deletar(t.id,a).then((a=>{const o=this.state.lancamentos,s=o.indexOf(t);o.splice(s,1),U.a.dialog.alert("Lan\xe7amento exclu\xeddo com sucesso!",(()=>{})),this.setState({lancamentos:o,showLoadingDialog:!1}),e.close()})).catch((t=>{e.close(),this.setState({showLoadingDialog:!1}),U.a.dialog.alert("Ocorreu um erro ao tentar excluir o lan\xe7amento.",(()=>{}))}))},this.aoSair=()=>{this.context.encerrarSessao(),this.props.history.push("/login")},this.goHome=()=>{this.props.history.push("/home")},this.fecharTabela=()=>{this.setState({showTableDialog:!1})},this.service=new N}render(){const t=this.service.obterListaMeses(),a=this.service.obterListaTipos();return Object(p.jsxs)(F.a,{children:[Object(p.jsx)(B.a,{infinite:!0,color:"blue",style:{display:this.state.showLoadingDialog?"block":"none"}}),Object(p.jsx)($.a,{title:"FINAN\xc7AS"}),Object(p.jsx)(Q,{meses:t,tipos:a,buscar:this.aoBuscarForm,cadastrar:this.aoCadastrarForm,duplicarLancamentos:this.aoDuplicarLancamentos}),Object(p.jsx)(rt,{lancamentos:this.state.lancamentos,alterarStatus:this.aoAlterarStatus,deletarAction:this.abrirConfirmacao,editarAction:this.editar}),Object(p.jsxs)(R.a,{position:"right-bottom",slot:"fixed",color:"blue",children:[Object(p.jsx)(W.a,{ios:"f7:plus",aurora:"f7:plus",md:"f7:plus"}),Object(p.jsx)(W.a,{ios:"f7:xmark",aurora:"f7:xmark",md:"f7:xmark"}),Object(p.jsxs)(J.a,{position:"top",children:[Object(p.jsx)(P.a,{onClick:this.aoSair,label:"Sair",color:"red",children:Object(p.jsx)(W.a,{ios:"f7:nosign",aurora:"f7:nosign",md:"f7:nosign"})}),Object(p.jsx)(P.a,{onClick:this.goHome,label:"Home",color:"blue",children:Object(p.jsx)(W.a,{ios:"f7:house",aurora:"f7:house",md:"f7:house"})})]})]})]})}}it.contextType=j;var nt=Object(S.g)(it);function ct(t){let{data:a,consultar:e,deslogar:o}=t;const[s,r]=Object(b.useState)(!1),i=a.saldo,n=a.usuario,c=st.a.format(i,{locale:"pt-BR"});return Object(p.jsxs)(F.a,{children:[Object(p.jsx)($.a,{title:"FINAN\xc7AS"}),Object(p.jsx)(D.a,{title:"Saldo",content:s?c:"R$ ******",footer:n}),Object(p.jsxs)(R.a,{position:"right-bottom",slot:"fixed",color:"blue",children:[Object(p.jsx)(W.a,{ios:"f7:plus",aurora:"f7:plus",md:"f7:plus"}),Object(p.jsx)(W.a,{ios:"f7:xmark",aurora:"f7:xmark",md:"f7:xmark"}),Object(p.jsxs)(J.a,{position:"top",children:[Object(p.jsx)(P.a,{onClick:o,label:"Sair",color:"red",children:Object(p.jsx)(W.a,{ios:"f7:nosign",aurora:"f7:nosign",md:"f7:nosign"})}),Object(p.jsx)(P.a,{onClick:e,label:"Lan\xe7amentos",children:Object(p.jsx)(W.a,{ios:"f7:money_dollar",aurora:"f7:money_dollar",md:"f7:money_dollar"})}),Object(p.jsx)(P.a,{onClick:()=>{s&&r(!1),s||r(!0)},label:"Ver / Ocultar Saldo",color:"red",children:Object(p.jsx)(W.a,{ios:"f7:eye",aurora:"f7:eye",md:"f7:eye"})})]})]})]})}class lt extends m.a.Component{constructor(){super(),this.state={saldo:0,usuario:""},this.aoConsultarLancamentos=()=>{this.props.history.push("/consulta-lancamentos")},this.aoSair=()=>{this.context.encerrarSessao(),this.props.history.push("/login")},this.usuarioService=new Y}componentDidMount(){const t=this.context.usuarioAutenticado;this.usuarioService.obterSaldoPorUsuario(t).then((a=>{this.setState({saldo:a.data,usuario:t.nome})})).catch((a=>{this.setState({saldo:0,usuario:t.nome}),console.error(a.response)}))}render(){return Object(p.jsx)(ct,{data:this.state,consultar:this.aoConsultarLancamentos,deslogar:this.aoSair})}}lt.contextType=j;var ut=lt;function ht(t){let{entrar:a,usuarios:e}=t;const[o,s]=Object(b.useState)(""),[r,i]=Object(b.useState)("");return Object(p.jsxs)(F.a,{noToolbar:!0,noNavbar:!0,noSwipeback:!0,loginScreen:!0,children:[Object(p.jsx)(w.a,{children:"Login"}),Object(p.jsxs)(y.a,{form:!0,children:[Object(p.jsx)(C.a,{label:"E-mail",type:"text",placeholder:"Seu e-mail",value:o,onInput:t=>{s(t.target.value)}}),Object(p.jsx)(C.a,{label:"Senha",type:"password",placeholder:"Sua senha",value:r,onInput:t=>{i(t.target.value)}}),Object(p.jsx)("button",{onClick:t=>{t.preventDefault(),a({email:o,senha:r})},className:"col button button-raised",children:"Entrar"}),Object(p.jsx)("br",{})]}),Object(p.jsx)(y.a,{children:Object(p.jsx)(V.a,{children:"Todos os direitos reservados. 2024"})})]})}var dt=e(224),bt=e.n(dt);class mt extends m.a.Component{constructor(){super(),this.state={showLoadingDialog:!1},this.aoEntrarForm=t=>{if(!t.email)return U.a.dialog.alert("Favor preencher o campo e-mail...",(()=>{})),!1;if(!t.senha)return U.a.dialog.alert("Favor preencher o campo senha...",(()=>{})),!1;this.setState({showLoadingDialog:!0});const a=U.a.dialog.preloader("Carregando...","blue");this.service.autenticar({email:t.email.trim(),senha:t.senha}).then((t=>{a.close(),this.context.iniciarSessao(t.data),this.props.history.push("/home")})).catch((t=>{t.response.status===bt.a.FORBIDDEN?(a.close(),this.setState({showLoadingDialog:!1}),U.a.dialog.alert("Nome de usu\xe1rio / senha inv\xe1lido(s), tente novamente ou mais tarde...",(()=>{}))):(a.close(),this.setState({showLoadingDialog:!1}),U.a.dialog.alert("Ocorreu um erro inesperado... Entre em contato com o Administrador.",(()=>{})))}))},this.toUsuarios=()=>{this.props.history.push("/cadastro-usuarios")},this.service=new Y}render(){return Object(p.jsxs)(F.a,{children:[Object(p.jsx)(B.a,{infinite:!0,color:"blue",style:{display:this.state.showLoadingDialog?"block":"none"}}),Object(p.jsx)(ht,{entrar:this.aoEntrarForm,usuarios:this.toUsuarios})]})}}mt.contextType=j;var pt=Object(S.g)(mt);const jt=["component","isUsuarioAutenticado"];function gt(t){let{component:a,isUsuarioAutenticado:e}=t,o=Object(f.a)(t,jt);return Object(p.jsx)(S.b,Object(r.a)(Object(r.a)({},o),{},{render:t=>e?Object(p.jsx)(a,Object(r.a)({},t)):Object(p.jsx)(S.a,{to:{pathname:"/login",state:{from:t.location}}})}))}function xt(t){return Object(p.jsx)(A.a,{children:Object(p.jsxs)(S.d,{children:[Object(p.jsx)(S.b,{path:"/",exact:!0,component:pt}),Object(p.jsx)(S.b,{path:"/login",component:pt}),Object(p.jsx)(S.b,{path:"/cadastro-usuarios",component:G}),Object(p.jsx)(gt,{isUsuarioAutenticado:t.isUsuarioAutenticado,path:"/home",component:ut}),Object(p.jsx)(gt,{isUsuarioAutenticado:t.isUsuarioAutenticado,path:"/consulta-lancamentos",component:nt}),Object(p.jsx)(gt,{isUsuarioAutenticado:t.isUsuarioAutenticado,path:"/cadastro-lancamentos/:id?",component:_})]})})}var Ot=()=>Object(p.jsx)(g,{children:t=>Object(p.jsx)(xt,{isUsuarioAutenticado:t.isAutenticado})});const vt={id:"com.devlhse.confin",name:"CONFIN",theme:"auto",routes:[]};var ft=function(){return Object(p.jsx)(i.a,Object(r.a)(Object(r.a)({},vt),{},{children:Object(p.jsx)(v,{children:Object(p.jsx)(Ot,{})})}))},St=e(225),At=e.n(St);o.a.use(s.a);const Dt=document.getElementById("root");At.a.render(Object(p.jsx)(m.a.StrictMode,{children:Object(p.jsx)(ft,{})}),Dt)}},[[463,1,2]]]);
//# sourceMappingURL=main.1bc867fa.chunk.js.map